<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Resolving multiple observations of the same variable into one — resolving • manydata</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Resolving multiple observations of the same variable into one — resolving"><meta name="description" content="This family of functions provides row-wise summarization for
data frames or tibbles,
returning a single value per row based on specified columns.
They are useful for tasks like extracting typical or summary values from
multiple variables, simplifying wide data structures,
and imputing representative values."><meta property="og:description" content="This family of functions provides row-wise summarization for
data frames or tibbles,
returning a single value per row based on specified columns.
They are useful for tasks like extracting typical or summary values from
multiple variables, simplifying wide data structures,
and imputing representative values."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">manydata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Go to home"><span class="fa fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-other-packages" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Other packages</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-other-packages"><li><a class="external-link dropdown-item" href="https://globalgov.github.io/manypkgs/">manypkgs</a></li>
    <li><a class="external-link dropdown-item" href="https://globalgov.github.io/manystates/">manystates</a></li>
  </ul></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/globalgov/manydata" aria-label="View on Github"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Resolving multiple observations of the same variable into one</h1>
      <small class="dont-index">Source: <a href="https://github.com/globalgov/manydata/blob/main/R/resolve.R" class="external-link"><code>R/resolve.R</code></a></small>
      <div class="d-none name"><code>resolving.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This family of functions provides row-wise summarization for
data frames or tibbles,
returning a single value per row based on specified columns.
They are useful for tasks like extracting typical or summary values from
multiple variables, simplifying wide data structures,
and imputing representative values.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">resolve_unite</span><span class="op">(</span><span class="va">.data</span>, <span class="va">vars</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">resolve_coalesce</span><span class="op">(</span><span class="va">.data</span>, <span class="va">vars</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">resolve_min</span><span class="op">(</span><span class="va">.data</span>, <span class="va">vars</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">resolve_max</span><span class="op">(</span><span class="va">.data</span>, <span class="va">vars</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">resolve_random</span><span class="op">(</span><span class="va">.data</span>, <span class="va">vars</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">resolve_precision</span><span class="op">(</span><span class="va">.data</span>, <span class="va">vars</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">resolve_mean</span><span class="op">(</span><span class="va">.data</span>, <span class="va">vars</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">resolve_mode</span><span class="op">(</span><span class="va">.data</span>, <span class="va">vars</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">resolve_median</span><span class="op">(</span><span class="va">.data</span>, <span class="va">vars</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">resolve_consensus</span><span class="op">(</span><span class="va">.data</span>, <span class="va">vars</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>A data frame or tibble containing the variables.</p></dd>


<dt id="arg-vars">vars<a class="anchor" aria-label="anchor" href="#arg-vars"></a></dt>
<dd><p>A vector of variables from <code>.data</code> to be resolved or converged.
If this argument is left unspecified,
then all variables will be merged together.</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>Logical whether missing values (NAs) should be removed
before operation of the function.
Note that unlike how the <code>na.rm</code> argument operates in functions in
base R, e.g. <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max()</a></code>, here the default is TRUE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="unite">Unite<a class="anchor" aria-label="anchor" href="#unite"></a></h2>


<p>Uniting returns all the unique values as a set,
separated by commas and contained within braces.
Note that uniting always returns a character/string vector,
which enables it to accommodate different classes of variables.
The order of the values reflects their first appearance;
that is, they are not ordered by increasing value.</p>
    </div>
    <div class="section level2">
    <h2 id="coalesce">Coalesce<a class="anchor" aria-label="anchor" href="#coalesce"></a></h2>


<p>Coalescing returns a vector of the first non-missing values
found when reading the variables from left to right.
That is, missing values in the first vector may be filled by
observations in the second vector, or later vectors if the second
vector also misses an observation for that cell.
Variables can be reordered manually.</p>
    </div>
    <div class="section level2">
    <h2 id="min-and-max">Min and Max<a class="anchor" aria-label="anchor" href="#min-and-max"></a></h2>


<p>These functions return a vector containing
each row's minimum or maximum value.
Note that these functions work not only on numeric and date vectors,
but also on character string vectors.
For character data, these functions will return the shortest
or longest strings, respectively, in each row.</p>
    </div>
    <div class="section level2">
    <h2 id="random">Random<a class="anchor" aria-label="anchor" href="#random"></a></h2>


<p>This function returns a vector of values selected randomly
from among the values contained in each row.
Note that by default <code>na.rm = TRUE</code>, which means that missing data
will not be selected at random by default,
which can also change the probability distribution by each row.
Where <code>na.rm = FALSE</code>, the probability of each value being selected
is uniform.</p>
    </div>
    <div class="section level2">
    <h2 id="precision">Precision<a class="anchor" aria-label="anchor" href="#precision"></a></h2>


<p>This function returns a vector that maximises the precision of the values
in each row.
For numeric vectors, precision is expressed in significant digits,
such that 1.01 would be more precise than 1.
For character vectors, precision is expressed in terms of the
character length proportional to the max character length in the row.
This applies also to messydates, meaning
precision is expressed in the lowest level date component specified,
such that 2008-10 would be more precise than 2008,
and 2008-10-10 would be more precise still.</p>
    </div>
    <div class="section level2">
    <h2 id="mean-and-median">Mean and median<a class="anchor" aria-label="anchor" href="#mean-and-median"></a></h2>


<p>These functions return a vector of the means or medians, respectively,
of the values in each row.</p>
    </div>
    <div class="section level2">
    <h2 id="consensus">Consensus<a class="anchor" aria-label="anchor" href="#consensus"></a></h2>


<p>This function returns a vector of consensus values,
i.e. where there is no variation in values by each row.
If the values (excluding missing values by default) are not equivalent,
then an NA is returned for that row.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>preferred_dataset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">6</span>,<span class="cn">NA</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                   more_comprehensive <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span>,<span class="fl">3</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                   precise_where_available <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="fl">3.3</span>,<span class="fl">4.1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">test</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   preferred_dataset more_comprehensive precise_where_available</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                 1                  1                      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                 6                  3                     3.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                NA                  3                     4.1</span>
<span class="r-in"><span><span class="fu">resolve_unite</span><span class="op">(</span><span class="va">test</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "{1}"       "{6,3,3.3}" "{3,4.1}"  </span>
<span class="r-in"><span><span class="fu">resolve_coalesce</span><span class="op">(</span><span class="va">test</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 6 3</span>
<span class="r-in"><span><span class="fu">resolve_min</span><span class="op">(</span><span class="va">test</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 3 3</span>
<span class="r-in"><span><span class="fu">resolve_max</span><span class="op">(</span><span class="va">test</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.0 6.0 4.1</span>
<span class="r-in"><span><span class="fu">resolve_random</span><span class="op">(</span><span class="va">test</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.0 3.3 4.1</span>
<span class="r-in"><span><span class="fu">resolve_precision</span><span class="op">(</span><span class="va">test</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.0 3.3 4.1</span>
<span class="r-in"><span><span class="fu">resolve_mean</span><span class="op">(</span><span class="va">test</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.00 4.10 3.55</span>
<span class="r-in"><span><span class="fu">resolve_mode</span><span class="op">(</span><span class="va">test</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 3 3</span>
<span class="r-in"><span><span class="fu">resolve_median</span><span class="op">(</span><span class="va">test</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.00 3.30 3.55</span>
<span class="r-in"><span><span class="fu">resolve_consensus</span><span class="op">(</span><span class="va">test</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  1 NA NA</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>manydata</p>
</div>

<div class="pkgdown-footer-right">
  <p>Part of the <a href="https://panarchic.ch/" class="external-link">PANARCHIC project</a>.</p>
</div>

    </footer></div>





  </body></html>

