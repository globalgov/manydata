<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Consolidate database into a single dataset — consolidate • qData</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Consolidate database into a single dataset — consolidate" />
<meta property="og:description" content="This function collapses a set or database of (q)datasets
into a single dataset with some combination of the
rows, columns, and observations of the parent datasets.
The function includes separate arguments for the rows and columns,
as well as for how to resolve conflicts in observations across datasets.
This provides users with considerable flexibility in how they combine qData.
For example, users may wish to stick to units that appear in every dataset
but include variables coded in any dataset,
or units that appear in any dataset
but only those variables that appear in every dataset.
Even then there may be conflicts, as the actual unit-variable observations
may differ from dataset to dataset.
Here we (will) offer a number of resolve methods that enable users to choose
how conflicts between observations are resolved." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">qData</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/user.html">Use</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/globalgov/qData/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Consolidate database into a single dataset</h1>
    <small class="dont-index">Source: <a href='https://github.com/globalgov/qData/blob/master/R/consolidate.R'><code>R/consolidate.R</code></a></small>
    <div class="hidden name"><code>consolidate.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function collapses a set or database of (q)datasets
into a single dataset with some combination of the
rows, columns, and observations of the parent datasets.
The function includes separate arguments for the rows and columns,
as well as for how to resolve conflicts in observations across datasets.
This provides users with considerable flexibility in how they combine qData.
For example, users may wish to stick to units that appear in every dataset
but include variables coded in any dataset,
or units that appear in any dataset
but only those variables that appear in every dataset.
Even then there may be conflicts, as the actual unit-variable observations
may differ from dataset to dataset.
Here we (will) offer a number of resolve methods that enable users to choose
how conflicts between observations are resolved.</p>
    </div>

    <pre class="usage"><span class='fu'>consolidate</span><span class='op'>(</span>
  <span class='va'>database</span>,
  rows <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"any"</span>, <span class='st'>"every"</span><span class='op'>)</span>,
  cols <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"any"</span>, <span class='st'>"every"</span><span class='op'>)</span>,
  resolve <span class='op'>=</span> <span class='st'>"coalesce"</span>,
  key <span class='op'>=</span> <span class='st'>"qID"</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>database</th>
      <td><p>A qPackage database object</p></td>
    </tr>
    <tr>
      <th>rows</th>
      <td><p>Which rows or units to retain.
By default "any" (or all) units are retained,
but another option is "every",
which retains only those units that appear in all parent datasets.</p></td>
    </tr>
    <tr>
      <th>cols</th>
      <td><p>Which columns or variables to retain.
By default "any" (or all) variables are retained,
but another option is "every",
which retains only those variables that appear in all parent datasets.</p></td>
    </tr>
    <tr>
      <th>resolve</th>
      <td><p>How conflicts between observations should be resolved.
Currently only "coalesce" is offered, which takes the first non-NA value,
but options should soon include
"max", "min", "mean", "mode" and "median", as well as "append".</p></td>
    </tr>
    <tr>
      <th>key</th>
      <td><p>An ID column to collapse by. By default "qID".</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A single tibble/data frame.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://purrr.tidyverse.org/reference/pluck.html'>pluck()</a></code> for selecting a single dataset from a database</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://purrr.tidyverse.org/reference/pluck.html'>pluck</a></span><span class='op'>(</span><span class='va'>emperors</span>, <span class='st'>"UNRV"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 99 x 7</span>
#&gt;    ID               Beg       End       Birth Death FullName          Dynasty   
#&gt;    <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>            <span style='color: #949494; font-style: italic;'>&lt;messydt&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;messydt&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>             <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>     
#&gt; <span style='color: #BCBCBC;'> 1</span> Augustus         0027 BC   0014 BC   63 BC 14    Gaius Julius Cae~ Julio-Cla~
#&gt; <span style='color: #BCBCBC;'> 2</span> Tiberius         0014 BC   0037      42 BC 37    Tiberius Claudiu~ Julio-Cla~
#&gt; <span style='color: #BCBCBC;'> 3</span> Gaius (Caligula) 0037      0041      12    14    Gaius Caesar Ger~ Julio-Cla~
#&gt; <span style='color: #BCBCBC;'> 4</span> Claudius         0041      0054      10 BC 41    Tiberius Claudiu~ Julio-Cla~
#&gt; <span style='color: #BCBCBC;'> 5</span> Nero             0054      0068      37    68    Claudius Nero Ca~ Julio-Cla~
#&gt; <span style='color: #BCBCBC;'> 6</span> Galba            0068      0069      3 BC  69    Servius Sulpiciu~ Year of t~
#&gt; <span style='color: #BCBCBC;'> 7</span> Otho             0069      0069      32    69    Marcus Salvius O~ Year of t~
#&gt; <span style='color: #BCBCBC;'> 8</span> Vitellius        0069      0069      15    69    Aulus Vitellius ~ Year of t~
#&gt; <span style='color: #BCBCBC;'> 9</span> Vespasian        0069      0079      9     79    Titus Flavius Ve~ Year of t~
#&gt; <span style='color: #BCBCBC;'>10</span> Titus            0079      0081      39    79    Titus Flavius Ve~ Flavian   
#&gt; <span style='color: #949494;'># ... with 89 more rows</span></div><div class='input'><span class='fu'>consolidate</span><span class='op'>(</span><span class='va'>emperors</span>, <span class='st'>"any"</span>, <span class='st'>"any"</span>, key <span class='op'>=</span> <span class='st'>"ID"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 137 x 15</span>
#&gt;    ID        CityBirth  ProvinceBirth Rise  Cause Killer Era   Notes Verif Birth
#&gt;    <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>         <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>  <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>
#&gt; <span style='color: #BCBCBC;'> 1</span> Augustus  Rome       Italia        Birt~ Assa~ Wife   Prin~ birt~ Redd~ 0062~
#&gt; <span style='color: #BCBCBC;'> 2</span> Tiberius  Rome       Italia        Birt~ Assa~ Other~ Prin~ birt~ Redd~ 0041~
#&gt; <span style='color: #BCBCBC;'> 3</span> Caligula  Antitum    Italia        Birt~ Assa~ Senate Prin~ assa~ Redd~ 0012~
#&gt; <span style='color: #BCBCBC;'> 4</span> Claudius  Lugdunum   Gallia Lugdu~ Birt~ Assa~ Wife   Prin~ birt~ Redd~ 0009~
#&gt; <span style='color: #BCBCBC;'> 5</span> Nero      Antitum    Italia        Birt~ Suic~ Senate Prin~ <span style='color: #BB0000;'>NA</span>    Redd~ 0037~
#&gt; <span style='color: #BCBCBC;'> 6</span> Galba     Terracina  Italia        Seiz~ Assa~ Other~ Prin~ birt~ Redd~ 0002~
#&gt; <span style='color: #BCBCBC;'> 7</span> Otho      Terentinum Italia        Appo~ Suic~ Other~ Prin~ <span style='color: #BB0000;'>NA</span>    <span style='color: #BB0000;'>NA</span>    0032~
#&gt; <span style='color: #BCBCBC;'> 8</span> Vitellius Rome       Italia        Seiz~ Assa~ Other~ Prin~ <span style='color: #BB0000;'>NA</span>    <span style='color: #BB0000;'>NA</span>    0015~
#&gt; <span style='color: #BCBCBC;'> 9</span> Vespasian Falacrine  Italia        Seiz~ Natu~ Disea~ Prin~ <span style='color: #BB0000;'>NA</span>    <span style='color: #BB0000;'>NA</span>    0009~
#&gt; <span style='color: #BCBCBC;'>10</span> Titus     Rome       Italia        Birt~ Natu~ Disea~ Prin~ <span style='color: #BB0000;'>NA</span>    <span style='color: #BB0000;'>NA</span>    0039~
#&gt; <span style='color: #949494;'># ... with 127 more rows, and 5 more variables: Death &lt;chr&gt;, FullName &lt;chr&gt;,</span>
#&gt; <span style='color: #949494;'>#   Dynasty &lt;chr&gt;, Beg &lt;messydt&gt;, End &lt;messydt&gt;</span></div><div class='input'><span class='fu'>consolidate</span><span class='op'>(</span><span class='va'>emperors</span>, <span class='st'>"every"</span>, <span class='st'>"every"</span>, key <span class='op'>=</span> <span class='st'>"ID"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 41 x 3</span>
#&gt;    ID        Beg           End       
#&gt;    <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;messydt&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;messydt&gt;</span> 
#&gt; <span style='color: #BCBCBC;'> 1</span> Augustus  0026-01-16 BC 0014-08-19
#&gt; <span style='color: #BCBCBC;'> 2</span> Tiberius  0014-09-18    0037-03-16
#&gt; <span style='color: #BCBCBC;'> 3</span> Claudius  0041-01-25    0054-10-13
#&gt; <span style='color: #BCBCBC;'> 4</span> Nero      0054-10-13    0068-06-09
#&gt; <span style='color: #BCBCBC;'> 5</span> Galba     0068-06-08    0069-01-15
#&gt; <span style='color: #BCBCBC;'> 6</span> Otho      0069-01-15    0069-04-16
#&gt; <span style='color: #BCBCBC;'> 7</span> Vespasian 0069-12-21    0079-06-24
#&gt; <span style='color: #BCBCBC;'> 8</span> Titus     0079-06-24    0081-09-13
#&gt; <span style='color: #BCBCBC;'> 9</span> Domitian  0081-09-14    0096-09-18
#&gt; <span style='color: #BCBCBC;'>10</span> Nerva     0096-09-18    0098-01-27
#&gt; <span style='color: #949494;'># ... with 31 more rows</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://jameshollway.com'>James Hollway</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


